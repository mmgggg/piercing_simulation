<script src="//daybrush.com/moveable/release/latest/dist/moveable.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

<div class="container-fluild m-4">
  <div class="row ml-10">
    <div class="col-6 text-right">
      <h1 class="pr-0">Simulation</h1>
    </div>
    <%#モーダルページ%>
    <div class="col-2">
      <button id="modalOpen" class="btn btn-link link-secondary pt-3 pl-0 ml-0">
        <%= image_tag '/icon/question.png'%>
        How to use
      </button>
      <div class="modal" tabindex="-1" id="modal">
        <%= render 'how_to_modal'%>
      </div>
    </div>
  </div>
  <div class="row">
    <%# 耳画像 %>
    <div class="col-6 d-flex justify-content-end mr-4">
      <div class="ear-image" style="height: 360px; width: 300px;">
        <canvas id="ear-image" width="300" height="360"></canvas>
        <div class="add-drag-and-drop" >
        </div>
      </div>
    </div>

    <%# ピアス画像データ%>
    <div class="pierce-images col-4">
      <div class="row gx-5">
        <div class="card col-3 text-center">
          <figure id= "image-1" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/1.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">circle</p>
          </div>
        </div>
        <div class="card col-3 text-center">
          <figure id= "image-2" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/2.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">ring</p>
          </div>
        </div>
        <div class="card col-3 text-center">
          <figure id= "image-3" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/3.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">barbell</p>
          </div>
        </div>
        <div class="card col-3 text-center">
          <figure id= "image-4" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/4.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">industrial</p>
          </div>
        </div>
        <div class="card col-3">
          <figure id= "image-5" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/5.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">circular<br>barbell</p>
          </div>
        </div>
        <div class="card col-3 text-center">
          <figure id= "image-6" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/6.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">circle</p>
          </div>
        </div>
        <div class="card col-3 text-center">
          <figure id= "image-7" onClick="copy_image(this.id)" style="padding: 0; margin: 0;">
            <%= image_tag '/pierceimage/7.png', class:"card-img-top", alt:"pierce_image" %>
          </figure>
          <div class="card-body" style="margin: 0;">
            <p class="card-title">circle</p>
          </div>
        </div>
      </div>
      <div class="button-group row pt-3">
        <%# Cleanボタン%>
        <div class="clean-button col-4">
          <button id="clean-btn" class="btn btn-secondary" onClick="removeMoveable()">Clean</button>
        </div>
        <%#投稿ボタン%>
        <div class="post-button col-4">
          <%= form_with model: @coordinate_image, url: {controller: 'simulation', action: 'create' }, id: "to_post" do |f| %>
            <%= f.hidden_field :for_post_image_url, :value => '', id: "url_field" %>
          <% end %>
          <button class="btn btn-secondary", id="post-button", onClick="postImage()">Post</button> 
        </div>
        <%# Downloadボタン%>
        <div class="download-button col-4">
          <input id="download-btn" type="button" value="Download" class="btn btn-dark">
        </div>
      </div>
    </div>
  </div>
</div>
  
<%= javascript_pack_tag 'simulation/main' %>